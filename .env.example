# Mealie MCP Server Environment Variables

# ============================================================================
# MULTI-USER SETUP: Each user gets their own server instance
# ============================================================================
# This is a single-tenant server - each instance serves ONE user's Mealie.
# For multiple users (Fraser & Sam), run two separate servers:
#   - Fraser: Port 8080, MEALIE_TOKEN=fraser's token, MCP_USER=fraser
#   - Sam:    Port 8081, MEALIE_TOKEN=sam's token, MCP_USER=sam
# See scripts/mealie-mcp-fraser.service and mealie-mcp-sam.service

# ============================================================================
# Mealie API Configuration (REQUIRED)
# ============================================================================
# Base URL for the Mealie API (include /api suffix)
MEALIE_URL=http://mealie:9000/api

# Mealie API bearer token for THIS server instance
# Generate in Mealie: User Profile → Manage API Tokens → Generate
# For multi-user: Each service file sets this to the user's token
MEALIE_TOKEN=your-mealie-api-token-here

# ============================================================================
# MCP Server Identity (for multi-user setups)
# ============================================================================
# User identifier for this server instance (e.g., "fraser" or "sam")
# Used for logging and server naming
MCP_USER=fraser

# Base URL where this server is accessible
# For multi-user with Tailscale Serve:
#   Fraser: https://rainworth-server.tailbf31d9.ts.net/fraser
#   Sam:    https://rainworth-server.tailbf31d9.ts.net/sam
MCP_BASE_URL=https://rainworth-server.tailbf31d9.ts.net

# ============================================================================
# MCP Transport Configuration
# ============================================================================
# Options: stdio (Claude Desktop local), sse (HTTP with long polling)
MCP_TRANSPORT=sse

# Server binding (for sse transport)
MCP_HOST=0.0.0.0
MCP_PORT=8080

# ============================================================================
# OAuth 2.1 Configuration (OPTIONAL - for Dynamic Client Registration)
# ============================================================================
# FastMCP provides basic OAuth for DCR (Dynamic Client Registration)
# This allows Claude to automatically register without manual setup
# No additional OAuth server needed - FastMCP handles it internally
POSTGRES_USER=hydra
POSTGRES_PASSWORD=change-me-in-production
POSTGRES_DB=hydra
